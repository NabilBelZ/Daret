<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Profile</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="css/all.min.css" />
  <link rel="stylesheet" href="css/framework.css" />
  <link rel="stylesheet" href="css/master.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;500&display=swap" rel="stylesheet" />

  <style>
    ::-webkit-scrollbar-thumb {
      background-color: #df4881ab;
    }
    ::-webkit-scrollbar-thumb:hover {
      background-color: #df4881ab;
    }
    .logo{
      width: 230px;
      height: 75px;
      transform: translateY(-15px);
    }
    .logo img{
      width: 80%;
      height: 100%;
    }
    .page{
      background-color: #ffc0cb2b;
    }
    .welcome, .latest-news, .quick-draft, .targets{
      box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
    }
    .form-control{
      width: 300px;
    }
    .row{
      padding-left: 75px;
    }
    .page h1::before {
      background-color: white;

    }
    .page h1::after {
      background-color: #f5c2c7;

    }
    h1{
      font-size: 2em;
      font-weight: bold;
    }
    h2{
      font-size: 1.5em;
      color: #DF4881FF;
      font-weight: bold;
    }
  </style>
</head>
<body>
<div class="page d-flex">
  <div class="sidebar bg-white p-20 p-relative">
    <div class="logo">
      <a href=""><img src="/images/logo.png"></a>
    </div>
    <ul>
      <li th:if="${session.role eq 'admin'}">
        <a class="d-flex align-center fs-14 c-black rad-6 p-10" href="/adminDashboard">
          <i class="fa-regular fa-chart-bar fa-fw"></i>
          <span>Dashboard</span>
        </a>
      </li>
      <li th:if="${session.role eq 'user'}">
        <a class="d-flex align-center fs-14 c-black rad-6 p-10" href="/userDashboard">
          <i class="fa-regular fa-chart-bar fa-fw"></i>
          <span>Dashboard</span>
        </a>
      </li>
      <li>
        <a class="active d-flex align-center fs-14 c-black rad-6 p-10" href="/profile">
          <i class="fa-regular fa-user fa-fw"></i>
          <span>Profil</span>
        </a>
      </li>
      <li th:if="${session.role eq 'admin'}">
      <a class="d-flex align-center fs-14 c-black rad-6 p-10" href="/ajouterDaret">
        <i class="fa-solid fa-plus"></i>
        <span>Créer une daret</span>
      </a>
    </li>
      <li th:if="${session.role eq 'admin'}">
        <a class="d-flex align-center fs-14 c-black rad-6 p-10" href="/tontines">
          <i class="fa-solid fa-diagram-project fa-fw"></i>
          <span>Liste des darets</span>
        </a>
      </li>

      <li th:if="${session.role eq 'user'}">
        <a class="d-flex align-center fs-14 c-black rad-6 p-10" href="/mesParticipations">
          <i class="fa-solid fa-diagram-project fa-fw"></i>
          <span>Mes participations</span>
        </a>
      </li>
      <li th:if="${session.role eq 'admin'}">
        <a class="d-flex align-center fs-14 c-black rad-6 p-10" href="/listDemandes">
          <i class="fa-regular fa-circle-user fa-fw"></i>
          <span >Liste demandes</span>
        </a>
      </li>
      <li th:if="${session.role eq 'admin'}">
        <a class="d-flex align-center fs-14 c-black rad-6 p-10" href="/listUsers">
          <i class="fa-regular fa-circle-user fa-fw"></i>
          <span>Liste des utilisateurs</span>
        </a>
      </li>
      <!-- <li>
        <a class="d-flex align-center fs-14 c-black rad-6 p-10" href="settings.html">
          <i class="fa-solid fa-gear fa-fw"></i>
          <span>Settings</span>
        </a>
      </li> -->
      <li th:if="${session.role eq 'user'}">
        <a class="d-flex align-center fs-14 c-black rad-6 p-10" href="/listeTontines">
          <i class="fa-solid fa-diagram-project fa-fw"></i>
          <span>Darets</span>
        </a>
      </li>
      <li>
        <a class="d-flex align-center fs-14 c-black rad-6 p-10" href="/seDeconnecter">
          <i class="fa-solid fa-arrow-right-from-bracket"></i>
          <span>Se déconnecter</span>
        </a>
      </li>
    </ul>
  </div>
  <div class="content w-full">
    <!-- Start Head -->
    <div class="head bg-white p-15 between-flex">
      <div class="search p-relative">
        <input class="p-10" type="search" placeholder="Type A Keyword"/>
      </div>
      <div class="icons d-flex align-center">
        <img src="imgs/avatar.png"/>
      </div>
    </div>
    <!-- End Head -->
    <h1 class="p-relative" style="color: #DF4881FF";>Profil</h1>
    <div class="profile-page m-20">
      <!-- Start Overview -->
      <div class="overview bg-white rad-10 d-flex align-center">
        <div class="avatar-box txt-c p-20">
          <img class="rad-half mb-10" src="imgs/avatar.png" alt="" />
          <h3 class="m-0" th:text="${user.lastname} + ' ' + ${user.firstname}"></h3>
          <p class="c-grey mt-10">Level 20</p>
          <div class="level rad-6 bg-eee p-relative">
            <span style="width: 100%;"></span>
          </div>
          <p class="c-grey m-0 fs-13" style="padding-top: 10px;">550 Rating</p>
        </div>
        <div class="info-box w-full txt-c-mobile">
          <!-- Start Information Row -->
          <div class="box p-20 d-flex align-center">
            <h4 class="c-grey fs-15 m-0 w-full">General Information</h4>
            <div class="fs-14">
              <span class="c-grey">Nom:</span>
              <span th:text="${user.lastname}"></span>
            </div>
            <div class="fs-14">
              <span class="c-grey">Prénom:</span>
              <span th:text="${user.firstname}"></span>
            </div>
            <div class="fs-14">
              <span class="c-grey">E-mail:</span>
              <span th:text="${user.email}"></span>
            </div>
            <div class="fs-14">
              <script>
                function toggle(){
                  var checkinput = document.querySelector('#checkinput');
                  if(checkinput.checked){
                    checkinput.checked=false;
                  }
                }
              </script>
              <label>

                <input class="toggle-checkbox" type="checkbox" id="checkinput"  data-bs-toggle="modal" data-bs-target="#modal_general_info"/>
                <div class="toggle-switch"></div>

                <div class="modal fade" id="modal_general_info" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title">Edit general informations</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" onclick="toggle()"></button>
                      </div>
                      <div class="modal-body">
                        <form th:action="@{/modifierInfoUser_process}" method="post" th:object="${user}">
                          <div class="row">
                            <label class="form-label">Nom :</label>
                            <input class="form-control" type="text" th:field="*{firstname}">
                          </div>
                          <div class="row">
                            <label class="form-label">Prénom :</label>
                            <input  class="form-control" type="text" th:field="*{lastname}">
                          </div>
                          <div class="row">
                            <label class="form-label">E-mail :</label>
                            <input  class="form-control" type="text" th:field="*{email}">
                          </div>
                          <input type="submit" value="Enregistrer" class="btn btn-primary" style="margin-left: 150px; margin-top: 20px;">
                        </form>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" onclick="toggle()" >Close</button>
                      </div>
                    </div>
                  </div>
                </div>
              </label>
            </div>
          </div>
          <!-- End Information Row -->
          <!-- Start Information Row -->
          <div class="box p-20 d-flex align-center">
            <h4 class="c-grey w-full fs-15 m-0">Personal Information</h4>
            <div class="fs-14">
              <span class="c-grey">Date de naissance:</span>
              <span>25/10/1982</span>
            </div>
            <div class="fs-14">
              <span class="c-grey">Numéro:</span>
              <span>(+212) 6 64 73 65 15</span>
            </div>
            <div class="fs-14">
              <span class="c-grey">Mot de passe:</span>
              <span>*********</span>
            </div>
            <div class="fs-14">
              <script>
                function toggle_pers_info(){
                  var checkinput = document.querySelector('#check_perso_info');
                  if(checkinput.checked){
                    checkinput.checked=false;
                  }
                }
              </script>
              <label>
                <input class="toggle-checkbox" type="checkbox" id="check_perso_info"  data-bs-toggle="modal" data-bs-target="#Personal_Information"/>
                <div class="toggle-switch"></div>

                <div class="modal fade" id="Personal_Information" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title">Edit Personal Information</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" onclick="toggle_pers_info()"></button>
                      </div>
                      <div class="modal-body">
                        <form th:action="@{/modifierMotdePasse_process}" method="post" th:object="${user}">
                          <script th:if="${password_error}">
                            alert('Mot de passe incorrect');
                            window.location.href="/profile";
                          </script>
                          <div class="row">
                            <label class="form-label">Ancien mot de passe :</label>
                            <input class="form-control" type="text" name="oldPassword">
                          </div>
                          <div class="row">
                            <label class="form-label">Nouveau mot de passe :</label>
                            <input class="form-control" type="text" name="newPassword">
                          </div>
                          <input type="submit" value="Enregistrer" class="btn btn-primary" style="margin-left: 150px; margin-top: 20px;">
                        </form>
                        <!-- <div class="row">
                          <label class="form-label">Date de naissance :</label>
                          <input class="form-control" type="text">
                        </div>
                        <div class="row">
                          <label class="form-label">Numéro Tel :</label>
                          <input  class="form-control" type="text">
                        </div>
                        <div class="row">
                          <label class="form-label">Pays :</label>
                          <input  class="form-control" type="text">
                        </div>
                        <input type="submit" value="Enrengistrer" class="btn btn-primary" style="margin-left: 150px; margin-top: 20px;">
                      -->
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" onclick="toggle_pers_info()" >Close</button>
                      </div>
                    </div>
                  </div>
                </div>
              </label>
            </div>
          </div>
          <!-- End Information Row -->
          <!-- Start Information Row -->
          <div class="box p-20 d-flex align-center">
            <h4 class="c-grey w-full fs-15 m-0">Billing Information</h4>
            <div class="fs-14">
              <span class="c-grey">Payment Method:</span>
              <span>Paypal</span>
            </div>
            <div class="fs-14">
              <span class="c-grey">Email:</span>
              <span>email@website.com</span>
            </div>
            <div class="fs-14">
              <span class="c-grey">Subscription:</span>
              <span>Monthly</span>
            </div>
            <div class="fs-14">
              <script>
                function toggle_billing(){
                  var checkinput = document.querySelector('#billing');
                  if(checkinput.checked){
                    checkinput.checked=false;
                  }
                }
              </script>
              <label>

                <input class="toggle-checkbox" type="checkbox" id="billing"  data-bs-toggle="modal" data-bs-target="#Billing_Information"/>
                <div class="toggle-switch"></div>

                <div class="modal fade" id="Billing_Information" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title">Edit general informations</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" onclick="toggle_billing()"></button>
                      </div>
                      <div class="modal-body">
                        Les données sont statiques.
                        <!-- <div class="row">
                         <label class="form-label">Payment Method :</label>
                         <input class="form-control" type="text">
                       </div>
                       <div class="row">
                         <label class="form-label">E-mail :</label>
                         <input  class="form-control" type="text">
                       </div>
                       <div class="row">
                         <label class="form-label">Subscription :</label>
                         <input  class="form-control" type="text">
                       </div>
                       <input type="submit" value="Enrengistrer" class="btn btn-primary" style="margin-left: 150px; margin-top: 20px;">
                     -->
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" onclick="toggle_billing()" >Close</button>
                      </div>
                    </div>
                  </div>
                </div>

              </label>
            </div>
          </div>
          <!-- End Information Row -->
        </div>
      </div>
      <!-- End Overview -->
      <!-- Start Other Data -->
      <div class="activities p-20 bg-white rad-10 mt-20">
        <h2 class="mt-0 mb-10">Dernière participation</h2>
        <p class="mt-0 mb-20 c-black fs-15">Dernière participation de l'utilisateur</p>
        <div class="activity d-flex align-center txt-c-mobile">
          <img src="imgs/activity-01.png" alt="" />
          <div class="info">
            <span class="d-block mb-10">Store</span>
            <span class="c-grey">Bought The Mastering Python Course</span>
          </div>
          <div class="date">
            <span class="d-block mb-10">18:10</span>
            <span class="c-grey">Yesterday</span>
          </div>
        </div>
        <div class="activity d-flex align-center txt-c-mobile">
          <img src="imgs/activity-02.png" alt="" />
          <div class="info">
            <span class="d-block mb-10">Academy</span>
            <span class="c-grey">Got The PHP Certificate</span>
          </div>
          <div class="date">
            <span class="d-block mb-10">16:05</span>
            <span class="c-grey">Yesterday</span>
          </div>
        </div>
        <div class="activity d-flex align-center txt-c-mobile">
          <img src="imgs/activity-03.png" alt="" />
          <div class="info">
            <span class="d-block mb-10">Badges</span>
            <span class="c-grey">Unlocked The 10 Skills Badge</span>
          </div>
          <div class="date">
            <span class="d-block mb-10">18:05</span>
            <span class="c-grey">Yesterday</span>
          </div>
        </div>
        <div class="activity d-flex align-center txt-c-mobile">
          <img src="imgs/activity-01.png" alt="" />
          <div class="info">
            <span class="d-block mb-10">Store</span>
            <span class="c-grey">Bought The Typescript Course</span>
          </div>
          <div class="date">
            <span class="d-block mb-10">12:05</span>
            <span class="c-grey">Yesterday</span>
          </div>
        </div>
      </div>
    </div>
    <!-- End Other Data -->
  </div>
</div>
</div>
</body>
</html>
